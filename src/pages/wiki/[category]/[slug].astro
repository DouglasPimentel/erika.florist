---
import WikiLayout from "$layouts/WikiLayout.astro"
import { WikiItem, postProcessWikiItem } from "$data/wiki"

export async function getStaticPaths() {
  const wikiItems = await Astro.glob<WikiItem>("/content/wiki/**/*.md")
  return wikiItems.map((wikiItem) => {
    wikiItem.frontmatter = postProcessWikiItem(wikiItem.frontmatter, wikiItem.file)

    return {
      params: {
        category: wikiItem.frontmatter.navigation.category,
        slug: wikiItem.frontmatter.slug,
      },
      props: { wikiItem },
    }
  })
}

export interface Props {
  article: WikiItem
}

const { wikiItem } = Astro.props
---

<WikiLayout wikiItem={wikiItem} />
