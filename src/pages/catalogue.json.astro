---
import { postProcessCatalogueItem, CatalogueItem } from "$data/catalogue"

let catalogueItems = await Astro.fetchContent("../content/catalogue/**/*.md")
catalogueItems = catalogueItems.map((item) => postProcessCatalogueItem(item as CatalogueItem))

const json = JSON.stringify(
  catalogueItems.map((item: CatalogueItem) => {
    return {
      title: item.title,
      cover: item.cover,
      cover_alt: item.cover_alt,
      creator: item.author || item.developer,
      url: item.url,
      type: item.type,
    }
  }),
)
---

{json}
